<head>
    <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
            tex2jax: {
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
            inlineMath: [['$','$']]
            }
        });
    </script>
</head>
<script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?...">
</script>

# What is a Real-Valued Function?

We will discuss functions with real variables, but the focus will be on transforming and extending Riemann integration in mathematical analysis to Lebesgue integration:
> Every Riemann integrable function is also Lebesgue integrable.

A typical real-valued function course follows this sequence of topics:
1. Set theory[集合理论]
2. Measure
3. Lebesgue measurable sets[勒贝格可测集]
4. Measurable functions[可测函数]
5. Lebesgue integrals

However, for the purposes of machine learning mathematics, we will focus on the concept of measure, as it forms the foundation of modern probability theory.

# Riemann Integral

Suppose the function $f(x)$ is defined on the closed interval $[a, b]$, and for any partition $\Delta$ on the interval $[a, b]$:
$$
a = x_0 < x_1 < \cdots < x_n = b,
$$
where $\Delta_i$ represents the length of the subinterval $[x_{i-1}, x_i]$. In each subinterval $[x_{i-1}, x_i]$, choose a point $\xi_i$, and form the sum of integrals (also called the **Riemann sum**):
$$
S_n(f, \Delta) = \sum_{i=1}^{n} f(\xi_i) \Delta_i.
$$

Let $\lambda = \max\{\Delta x_1, \Delta x_2, \dots, \Delta x_n\}$. Regardless of how the interval $[a, b]$ is partitioned and how each $\xi_i$ is selected, if as $\lambda \to 0$, the integral sum $S_n(f, \Delta)$ approaches the same constant $I$, we have:
$$
\lim_{\lambda \to 0} S_n(f, \Delta) = \lim_{\lambda \to 0} \sum_{i=1}^{n} f(\xi_i) \Delta x_i = I.
$$

Then, we say that the function $f(x)$ is integrable on $[a, b]$, and we define the integral of $f(x)$ over $[a, b]$, written as:
$$
\int_a^b f(x) dx = I = \lim_{\lambda \to 0} \sum_{i=1}^{n} f(\xi_i) \Delta x_i.
$$

This definition of the integral was rigorously established by the German mathematician **Riemann**, and thus this integral is generally called the **Riemann integral**, abbreviated as **R integral**.

---

**Notes**:
1. No special requirements are imposed on $f(x)$.
2. The partition and selection of points within the interval are arbitrary; $\xi_i$ need not be the midpoint of each subinterval.

# Darboux Integration

Suppose the function $f(x)$ is defined on the closed interval $[a, b]$, and for any partition $\Delta$ on the interval $[a, b]$:
$$
a = x_0 < x_1 < \cdots < x_n = b,
$$
the upper and lower bounds of $f(x)$ on each subinterval $[x_{i-1}, x_i]$ are denoted as $M_i$ and $m_i$, respectively:
$$
M_i = \sup\{f(x) \mid x \in [x_{i-1}, x_i]\}, \quad m_i = \inf\{f(x) \mid x \in [x_{i-1}, x_i]\}.
$$

Let $\bar{S}(f, \Delta)$ and $\underline{S}(f, \Delta)$ represent the **upper Darboux sum** and **lower Darboux sum** of the function $f(x)$ with respect to the partition $\Delta$, abbreviated as the upper and lower sums:
$$
\bar{S}(f, \Delta) = \sum_{i=1}^{n} M_i \Delta x_i, \quad \underline{S}(f, \Delta) = \sum_{i=1}^{n} m_i \Delta x_i.
$$

Let $\omega_i = M_i - m_i$, where $\omega_i$ represents the amplitude of $f(x)$ on $[x_{i-1}, x_i]$. The difference between the upper and lower sums is called the **oscillation** of $f(x)$. If the upper and lower bounds converge to the same value, we call the function $f(x)$ **Darboux integrable** on $[a, b]$. The upper and lower integrals are denoted as:
$$
\int_a^b f(x) dx = \inf_{\Delta} \bar{S}(f, \Delta) = \sup_{\Delta} \underline{S}(f, \Delta).
$$

It is obvious that, regardless of the partition $\Delta$ and how $\xi_i$ is selected, we always have:

$$
\sum_{i=1}^{n} m_i \Delta x_i \leq \sum_{i=1}^{n} f(\xi_i) \Delta x_i \leq \sum_{i=1}^{n} M_i \Delta x_i \quad \rightarrow \quad \underline{\int_a^b} f(x) dx \leq \lim_{\lambda \to 0} \sum_{i=1}^{n} f(\xi_i) \Delta x_i \leq \overline{\int_a^b} f(x) dx
$$

It can be proven that if the upper Darboux sum equals the lower Darboux sum, then $f(x)$ is integrable on $[a, b]$, and its integral is the Riemann integral:
$$
\underline{\int_a^b} f(x) dx = \lim_{\lambda \to 0} \sum_{i=1}^{n} f(\xi_i) \Delta x_i = \overline{\int_a^b} f(x) dx
$$

Riemann integrals and Darboux integrals are equivalent; they define the same concept from different perspectives. The Riemann integral is more intuitive, but the Darboux integral is easier to define and compute.

# Limitations of the Riemann Integral

Suppose the function $f(x)$ is bounded on the interval $[a, b]$. Then the necessary and sufficient condition for the Riemann integrability of $f(x)$ on $[a, b]$ is that the set of discontinuities of $f(x)$ on $[a, b]$ has measure zero.

The limitations of the Riemann integral are reflected in the following points:
1. **Limited range of integrable functions**  
   The Riemann integral requires that the function be almost everywhere continuous, but there are many functions that are nowhere continuous and still integrable.

Consider the function $D(x)$ defined on the interval $[0, 1]$, where if $x \in [0,1]$ is a rational number, $D(x) = 1$, otherwise $D(x) = 0$. This is called the **Dirichlet function**:

$$
D(x) = 
\begin{cases}
1, & x \text{ is rational} \\
0, & x \text{ is irrational}
\end{cases}
$$

Since there are both rational and irrational numbers arbitrarily close to each other, for any partition of $[0, 1]$ and any subinterval $[x_{i-1}, x_i]$, we have:

$$
M_i = \sup \{D(x) | x \in [x_{i-1}, x_i]\} = 1, \quad m_i = \inf \{D(x) | x \in [x_{i-1}, x_i]\} = 0
$$

Thus, the Darboux upper and lower sums for this function are:

$$
\bar{S}(f, \Delta) = \sum_{i=1}^{n} M_i \Delta x_i = \sum_{i=1}^{n} \Delta x_i = 1
$$

$$
\underline{S}(f, \Delta) = \sum_{i=1}^{n} m_i \Delta x_i = 0
$$

Hence, in Riemann integration, this function is not integrable because $\bar{S}(f, \Delta) \neq \underline{S}(f, \Delta)$. However, the Dirichlet function is integrable in the Lebesgue sense, with an integral of 0.

2. **Too strict on the interchangeability of limit and integral operations**

For the Riemann integral, the limit and integral can only be interchanged if $f(x)$ is uniformly continuous on $[a,b]$. Otherwise, this is not allowed.

$$
\lim_{n \to \infty} \int_0^1 f_n(x) dx = \int_0^1 \lim_{n \to \infty} f_n(x) dx,
\text{if } f(x) \text{ is uniformly continuous.}
$$

However, there exist many functions that are not uniformly continuous but still allow the interchange of the limit and integral. For example, the function $f_n(x) = x^n(0 \leq x \leq 1)$ is **pointwise convergent but not uniformly convergent**, and it converges to:

$$
\lim_{n \to \infty} f_n(x) = f(x) =
\begin{cases}
0, & 0 \leq x < 1 \\
1, & x = 1
\end{cases}
$$

For $f(x)$, we have:

$$
\lim_{n \to \infty} \int_0^1 f_n(x) dx = \lim_{n \to \infty} \int_0^1 x^n dx = \lim_{n \to \infty} \left[ \frac{x^{n+1}}{n+1} \right]_0^1 = \lim_{n \to \infty} \frac{1}{n+1} = 0
$$

and:

$$
\int_0^1 \lim_{n \to \infty} f_n(x) dx = \int_0^1 f(x) dx = 0
$$

Even though $f(x)$ is not uniformly continuous, we can still interchange the limit and the integral.

3. **The space of Riemann integrable functions is incomplete**  

The following example demonstrates this:

In the interval $[0,1]$, let the dyadic rational numbers be $\{0, 1, \frac{1}{2}, \frac{1}{4}, \frac{3}{4}, \frac{1}{8}, \frac{3}{8}, \frac{5}{8}, \frac{7}{8}, \dots\}$, and denote this sequence by $\{r_n\}$.

Define a sequence of functions $\{f_n(x)\}$:

$$
f_n(x) =
\begin{cases}
1, & x = \{r_n\} \\
0, & \text{otherwise}
\end{cases}
$$

Clearly, for any finite $f_n(x)$, it is Riemann integrable since its set of discontinuities is finite.

However, the limit of this sequence $f(x) = \lim_{n \to \infty} f_n(x)$ is a function similar to the Dirichlet function, discontinuous at every point, and there is always a dyadic rational in any interval. Hence, its Darboux upper sum does not equal the lower sum, so $f(x)$ is not Riemann integrable.

# Lebesgue Integral

The basic idea of the Lebesgue integral is to partition based on the range of values. For instance, let the $i$-th interval in the range be $[y_{i-1}, y_i]$. Suppose all $x$ values in this range consist of three parts $\{E_1, E_2, E_3\}$, and the total measure of these $x$ values is $|E|$:

$$
|E| = |E_1| + |E_2| + |E_3|.
$$

Take an arbitrary value $\xi_i$ from $[y_{i-1}, y_i]$, for example, let $\xi_i = y_i$. Then the area formed by $f(x)$ over these regions can be approximately represented as $S_i$, and the total area enclosed by the curve $S$ is:

$$
S_i \approx \xi_i |E_i|, \quad S \approx S_\Delta = \sum_{i=1}^{n} \xi_i |E_i|.
$$

If $\Delta y_i \to 0$, then $S_\Delta \to S$, and in the limit, they are equal.


















